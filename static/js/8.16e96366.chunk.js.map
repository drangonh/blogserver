{"version":3,"sources":["page/home/ArticleDetail.js","axios/index.js","static/image/defualt.jpeg","components/common/CommonLeft.js"],"names":["App","inject","observer","props","getDetail","a","data","history","location","search","paramsString","substring","searchParams","URLSearchParams","languageId","get","contentId","params","res","setState","detail","state","this","id","className","storeTitle","languageTitle","source","content","skipHtml","htmlMode","escapeHtml","plugins","toc","BaseComponent","url","Promise","resolve","reject","axios","then","catch","err","post","defaults","baseURL","withCredentials","timeout","headers","interceptors","request","use","config","error","response","status","module","exports","CommonLeft","changeInfo","push","pathname","logout","header","handleClick","e","target","show","art","lag","popoverBottom","title","onClick","getLagAndArtCnt","article","language","person","trigger","placement","overlay","src","uid","avatar","require","nickName","description","React","Component"],"mappings":"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","file":"static/js/8.16e96366.chunk.js","sourcesContent":["/**\r\n * 首页\r\n * author:dragonh\r\n * time:2020/4/30\r\n **/\r\nimport React from 'react';\r\nimport './ArticleDetail.scss';\r\nimport BaseComponent from \"../../components/common/BaseComponent\";\r\nimport {post, get} from \"../../axios\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport CommonLeft from \"../../components/common/CommonLeft\";\r\nimport Markdown from \"react-markdown\";\r\nimport toc from \"remark-toc\";\r\n\r\n// 观察者\r\n@inject('header')\r\n@observer\r\nclass App extends BaseComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            detail: {}\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getDetail()\r\n    }\r\n\r\n    getDetail = async () => {\r\n        const data = this.props.history.location.search  //地址栏截取\r\n        const paramsString = data.substring(1)\r\n        console.log(paramsString)\r\n\r\n        const searchParams = new URLSearchParams(paramsString)\r\n        const languageId = searchParams.get('languageId')\r\n        const contentId = searchParams.get('contentId')\r\n\r\n        const params = {\r\n            languageId: languageId,\r\n            contentId: contentId,\r\n        };\r\n\r\n        const res = await get(\"markdownStore/getArticleDetail\", params)\r\n        console.log(res.data);\r\n\r\n\r\n        if (res && res.data) {\r\n            this.setState({\r\n                detail: res.data,\r\n            })\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {detail} = this.state;\r\n        return (\r\n            <div id=\"articleDetail\">\r\n                <CommonLeft {...this.props}/>\r\n\r\n                <div className={\"right\"}>\r\n                    <div className={\"box_387X1\"}>\r\n                        <div className={\"text_388X1\"}>\r\n                            {detail.storeTitle}\r\n                        </div>\r\n\r\n\r\n                        <div className={\"box_200\"}>\r\n                            <div className={\"text_420X1\"}>{detail.languageTitle}</div>\r\n                        </div>\r\n\r\n                        <div className={\"text_393X1\"}>\r\n                            {/*{detail.content}*/}\r\n                            <Markdown\r\n                                className=\"result\"\r\n                                source={detail.content}\r\n                                skipHtml={this.state.htmlMode === 'skip'}\r\n                                escapeHtml={this.state.htmlMode === 'escape'}\r\n                                plugins={[toc]}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className={\"box_201\"}>\r\n                            <div className={\"box_202\"}>\r\n                                <div className={\"icon_7X1\"}>\r\n                                    {\"<\"}\r\n                                </div>\r\n\r\n                                <div className={\"text_436X1\"}>上一篇文章标题</div>\r\n                            </div>\r\n\r\n                            <div className={\"box_202\"}>\r\n                                <div className={\"text_436X1\"}>下一篇文章标题</div>\r\n\r\n                                <div className={\"icon_7X1\"}>\r\n                                    {\">\"}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","/**axios封装\r\n * 请求拦截、相应拦截、错误统一处理\r\n */\r\nimport axios from 'axios';\r\nimport QS from 'qs';\r\n// import {Toast} from 'vant';\r\n// import store from '../store/index'\r\n\r\nconst development = \"http://127.0.0.1:8888/blog/\";\r\nconst production = \"https://www.dontheway.com:8880/blog/\";\r\n\r\n// 环境的切换\r\nif (process.env.NODE_ENV == 'development') {\r\n    axios.defaults.baseURL = development;\r\n} else if (process.env.NODE_ENV == 'debug') {\r\n    axios.defaults.baseURL = '';\r\n} else if (process.env.NODE_ENV == 'production') {\r\n    axios.defaults.baseURL = production;\r\n}\r\n\r\n// 允许携带cookie，跨域设置。跨域的时候会造成无法携带cookie，这时需要允许跨域。同时后端也要进行配置\r\naxios.defaults.withCredentials = true;\r\n\r\n// 请求超时时间\r\naxios.defaults.timeout = 10000;\r\n\r\n// 请求头设置，post请求的时候必须设置'Content-Type': 'application/x-www-form-urlencoded'\r\n//以下两种写法都可以\r\naxios.defaults.headers = {\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n};\r\n\r\n// post请求头\r\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\r\n\r\n// 请求拦截器\r\naxios.interceptors.request.use(\r\n    config => {\r\n        // 每次发送请求之前判断是否存在token，如果存在，则统一在http请求的header都加上token，不用每次请求都手动添加了\r\n        // 即使本地存在token，也有可能token是过期的，所以在响应拦截器中要对返回状态进行判断\r\n        // const token = store.state.token;\r\n        const token = \"\";\r\n        token && (config.headers.Authorization = token);\r\n        return config;\r\n    },\r\n    error => {\r\n        return Promise.error(error);\r\n    })\r\n\r\n// 响应拦截器\r\naxios.interceptors.response.use(\r\n    response => {\r\n        if (response.status === 200) {\r\n            return Promise.resolve(response);\r\n        } else {\r\n            return Promise.reject(response);\r\n        }\r\n    },\r\n    // 服务器状态码不是200的情况\r\n    error => {\r\n        if (error.response.status) {\r\n            switch (error.response.status) {\r\n                // 401: 未登录\r\n                // 未登录则跳转登录页面，并携带当前页面的路径\r\n                // 在登录成功后返回当前页面，这一步需要在登录页操作。\r\n                case 401:\r\n\r\n                    // router.replace({\r\n                    //     path: '/login',\r\n                    //     query: {redirect: router.currentRoute.fullPath}\r\n                    // });\r\n                    break;\r\n                // 403 token过期\r\n                // 登录过期对用户进行提示\r\n                // 清除本地token和清空vuex中token对象\r\n                // 跳转登录页面\r\n                case 403:\r\n                    // Toast({\r\n                    //     message: '登录过期，请重新登录',\r\n                    //     duration: 1000,\r\n                    //     forbidClick: true\r\n                    // });\r\n                    // // 清除token\r\n                    // localStorage.removeItem('token');\r\n                    // store.commit('loginSuccess', null);\r\n                    // // 跳转登录页面，并将要浏览的页面fullPath传过去，登录成功后跳转需要访问的页面\r\n                    // setTimeout(() => {\r\n                    //     router.replace({\r\n                    //         path: '/login',\r\n                    //         query: {\r\n                    //             redirect: router.currentRoute.fullPath\r\n                    //         }\r\n                    //     });\r\n                    // }, 1000);\r\n                    break;\r\n                // 404请求不存在\r\n                case 404:\r\n                    // Toast({\r\n                    //     message: '网络请求不存在',\r\n                    //     duration: 1500,\r\n                    //     forbidClick: true\r\n                    // });\r\n                    break;\r\n                // 其他错误，直接抛出错误提示\r\n                default:\r\n                // Toast({\r\n                //     message: error.response.data.message,\r\n                //     duration: 1500,\r\n                //     forbidClick: true\r\n                // });\r\n            }\r\n            return Promise.reject(error.response);\r\n        }\r\n    }\r\n);\r\n\r\n/**\r\n * get方法，对应get请求\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function get(url, params) {\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(url, {\r\n            params: params,\r\n        })\r\n            .then(res => {\r\n                console.log(\"请求参数\", params);\r\n                console.log(\"请求地址\", url);\r\n                console.log(\"请求结果\", res);\r\n                resolve(res.data);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"请求错误\", err);\r\n                reject(err.data)\r\n            })\r\n    });\r\n}\r\n\r\n/**\r\n * post方法，对应post请求\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function post(url, params) {\r\n    return new Promise((resolve, reject) => {\r\n        //axios的默认Content-Type是 application/json;charset=utf-8\r\n        //params= QS.stringify(params);   这会让参数拼接在URL后面\r\n        //如果后端参数是body中拿到的，那么需要设置Content-Type': 'application/x-www-form-urlencoded'\r\n        axios.post(url, params)\r\n            .then(res => {\r\n                console.log(\"请求参数\", params);\r\n                console.log(\"请求地址\", url);\r\n                console.log(\"请求结果\", res);\r\n                resolve(res.data);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"请求错误\", err);\r\n                reject(err.data)\r\n            })\r\n    });\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/defualt.8e05f6fe.jpeg\";","import React from 'react';\r\nimport \"./CommonLeft.scss\"\r\nimport {OverlayTrigger, Popover} from \"react-bootstrap\";\r\nimport {get} from \"../../axios\";\r\nimport {inject, observer} from \"mobx-react\";\r\n\r\n@inject('header')\r\n@observer\r\nclass CommonLeft extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: true,\r\n            target: null,\r\n            art: 0,//文章数量\r\n            lag: 0,//分类数量\r\n        }\r\n\r\n        this.popoverBottom = (\r\n            <Popover id=\"popover-positioned-bottom\" className={\"loginImage\"} title=\"底部弹出\">\r\n                <div className={\"box_xx200\"} onClick={this.changeInfo}>修改资料</div>\r\n                <div className={\"box_xx200\"} onClick={this.logout}>退出登录</div>\r\n            </Popover>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getLagAndArtCnt()\r\n    }\r\n\r\n    /*方法说明\r\n     *@method getLagAndArtCnt\r\n     *@for CommonLeft\r\n    */\r\n    async getLagAndArtCnt() {\r\n        const res = await get(\"user/getArtAndCatCnt\", {})\r\n        console.log(res)\r\n        if (res.data) {\r\n            this.setState({\r\n                art: res.data.article,//文章数量\r\n                lag: res.data.language\r\n            })\r\n        }\r\n    }\r\n\r\n    /*方法说明\r\n     *@method changeInfo:更新用户信息\r\n     *@for CommonLeft\r\n     *@param nil\r\n     *@return nil\r\n    */\r\n    changeInfo = () => {\r\n        this.props.history.push({\r\n            pathname: \"/updateInfo\",\r\n        });\r\n    }\r\n\r\n    /*方法说明\r\n     *@method logout\r\n     *@for CommonLeft\r\n     *@param nil\r\n     *@return nil\r\n    */\r\n    logout = () => {\r\n        get(\"user/logout\", {}).then(res => {\r\n            const {header} = this.props;\r\n            header.changeInfo(null)\r\n            this.props.history.push({\r\n                pathname: \"/login\",\r\n            });\r\n        })\r\n\r\n    }\r\n\r\n    handleClick = e => {\r\n        console.log(e.target)\r\n        this.setState({\r\n            target: e.target,\r\n            show: !this.state.show\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {header: {person}} = this.props\r\n        const {lag, art} = this.state;\r\n        return (\r\n            <div id={\"commonLeft\"}>\r\n\r\n                <div\r\n                    onClick={this.handleClick}\r\n                    className={\"box_278X1\"}>\r\n\r\n\r\n                    <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={this.popoverBottom}>\r\n                        <img\r\n                            src={person && person.uid && person.avatar ? person.avatar : require(\"../../static/image/defualt.jpeg\")}\r\n                            className={\"photo\"}/>\r\n                    </OverlayTrigger>\r\n\r\n                    <h4>\r\n                        {person && person.uid ?\r\n                            person.nickName ? person.nickName : \"请修改个人资料\"\r\n                            : \"请登录\"}\r\n                    </h4>\r\n\r\n                    <p>\r\n                        {person && person.uid ? person.description : \"\"}\r\n                    </p>\r\n                </div>\r\n\r\n                <div className={\"box_275X1\"}>\r\n                    <div className={\"wrapper_118X1\"}>\r\n                        <div className={\"text_268X1\"}>{art}</div>\r\n                        <div className={\"text_269X1\"}>文章</div>\r\n                    </div>\r\n\r\n                    <div className={\"wrapper_118X1\"}>\r\n                        <div className={\"text_268X1\"}>{lag}</div>\r\n                        <div className={\"text_269X1\"}>分类</div>\r\n                    </div>\r\n\r\n                    {/*<div className={\"wrapper_118X1\"}>*/}\r\n                    {/*    <div className={\"text_268X1\"}>1</div>*/}\r\n                    {/*    <div className={\"text_269X1\"}>Tags</div>*/}\r\n                    {/*</div>*/}\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CommonLeft;\r\n"],"sourceRoot":""}